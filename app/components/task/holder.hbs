<div data-test-task-card class='task-card {{this.taskStyleClass}}' tabindex='0'>
  <Task-Details
    @task={{@task}}
    @disabled={{@disabled}}
    @onTaskUpdate={{this.onUpdate}}
    @onPercentageChange={{this.onPercentageChange}}
    @percentCompleted={{this.percentCompleted}}
    @progressBarClass={{this.progressBarClass}}
    @isProgressBarDisabled={{this.isProgressBarDisabled}}
    @onInputChange={{this.progressBarInputChange}}
    @dev={{@dev}}
  />

  <div class='task-card__status-update-container'>

    {{#if this.extensionFormOpened}}
      {{#if @dev}}
        <Task::MultipleExtensionForm
          @task={{@task}}
          @closeForm={{this.closeExtensionForm}}
          @title='Extension Details'
          @closeModel={{this.closeExtensionModel}}
        />
      {{else}}
        <Task::ExtensionForm
          @task={{@task}}
          @closeForm={{this.closeExtensionForm}}
          @title='Form for extension Request'
          @closeModel={{this.closeExtensionModel}}
        />
      {{/if}}
    {{/if}}

    {{#if (not-eq this.status this.TASK_KEYS.VERIFIED)}}
      <div class='task-update-container'>
        <label id='task-update-label' for='task-update'><b>Status:</b></label>
        <select
          data-test-task-status-select
          id='task-update'
          {{on 'change' this.onStatusChange}}
        >
          {{#each this.availabletaskStatusList as |taskStatus|}}
            {{#if (not-eq taskStatus.key this.TASK_KEYS.ALL)}}
              {{#if @dev}}
                {{#if
                  (and
                    (not-eq taskStatus.key 'VERIFIED')
                    (not-eq taskStatus.key 'RELEASED')
                    (not-eq taskStatus.key 'REGRESSION_CHECK')
                    (not-eq taskStatus.key 'SANITY_CHECK')
                    (not-eq taskStatus.key 'APPROVED')
                    (not-eq taskStatus.key 'SMOKE_TESTING')
                    (not-eq taskStatus.key 'NEEDS_REVIEW')
                  )
                }}
                  <option
                    value={{taskStatus.key}}
                    selected={{eq taskStatus.key this.status}}
                  >
                    {{taskStatus.displayLabel}}
                  </option>
                {{/if}}

              {{else}}
                <option
                  value={{taskStatus.key}}
                  selected={{eq taskStatus.key this.status}}
                >
                  {{taskStatus.displayLabel}}
                </option>
              {{/if}}

            {{/if}}
          {{/each}}
        </select>
      </div>
    {{/if}}

    {{#if @dev}}
      {{#if (not-eq @task.status 'COMPLETED')}}
        {{log 'inside if loop' @task.status}}
        <button
          class='task-card__extensionForm-button'
          data-test-task-extensionForm-button
          type='button'
          {{on 'click' this.toggleExtensionForm}}
        > Request Extension </button>
      {{/if}}
    {{else}}
      <button
        class='task-card__extensionForm-button'
        data-test-task-extensionForm-button
        type='button'
        {{on 'click' this.toggleExtensionForm}}
      > Extension Status</button>

    {{/if}}

    {{#if this.isLoading}}
      <div data-test-task-spinner class='task-card__loader-container'>
        <Spinner />
      </div>
    {{/if}}
  </div>
</div>